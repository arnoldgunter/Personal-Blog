{"version":3,"file":"search-BOC0YOQy.js","sources":["../../../src/routes/search/+page.marko"],"sourcesContent":["import { pb } from \"../../lib/pb\";\n\n<div class=\"posts\">\n\n    <h2>Search results for: \"${$global.url.searchParams.get(\"q\")}\"</h2>\n\n    <try>\n        <@placeholder>\n            <div>Loading search results...</div>\n        </@placeholder>\n\n        <@catch|err|>\n            <div class=\"error\">\n                Error fetching search results: ${err.message}\n            </div>\n        </@catch>\n\n        <await|data|=fetchPosts($global.url.searchParams.get(\"q\"))>\n            <if=data.length === 0>\n                <p>\n                    No results for \"${$global.url.searchParams.get(\"q\")}\" found.\n                    Go back and try a different search.\n                </p>\n            </if>\n\n                <for|post| of=data>\n                    <a href=`/post/${post.slug}` class=\"post\">\n                        <span class=\"post-content\">\n                            <small>\n                                ${new Intl.DateTimeFormat(\"en-US\", {\n                                    year: \"numeric\",\n                                    month: \"long\",\n                                    day: \"numeric\",\n                                }).format(new Date(post.created))}\n                            </small>\n                            <h5>${post.title}</h5>\n                            <p>${post.subtitle}</p>\n                        </span>\n                        <img\n                            src=`http://127.0.0.1:8090/api/files/${post.collectionId}/${post.id}/${post.cover}?thumb=300x150`\n                            alt=`${post.title}`\n                            class=\"post-image\">\n                    </a>\n                </for>\n        </await>\n    </try>\n</div>\nstatic const fetchPosts = async (query) => {\n    const results = await pb.collection(\"posts\").getList(1, 50, {\n        filter: `title~\"${query}\"`,\n        sort: \"-created\",\n    });\n\n    return results.items;\n};\n\n<style>\n    .posts {\n        width: clamp(200px, 100%, 996px);\n        min-height: 70vh;\n        margin: 2rem auto;\n        padding: 2rem 1rem;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 1rem;\n        overflow: hidden;\n    }\n\n    .posts h2 {\n        margin-bottom: 2rem;\n    }\n\n    .post {\n        position: relative;\n        width: 100%;\n        height: fit-content;\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        padding-bottom: 1rem;\n        border-bottom: 1px solid var(--line-color);\n        text-decoration: none;\n        transition: all 0.2s ease-in-out;\n    }\n\n    .post::before {\n        content: \"\";\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 0%;\n        height: 1px;\n        background-color: #333;\n        z-index: 1000;\n        transition: all 0.3s ease-in-out;\n    }\n\n    .post:hover::before {\n        width: 100%;\n        transition: all 0.3s ease-in-out;\n    }\n\n    .post .post-content {\n        width: 100%;\n        max-height: 500px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .post h5 {\n        padding: 0px;\n        text-overflow: ellipsis;\n        line-clamp: 3;\n        -webkit-line-clamp: 3;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n    }\n\n    .post p {\n        margin-top: 0.5rem;\n        color: var(--text-secondary-color);\n        text-overflow: ellipsis;\n        line-clamp: 2;\n        -webkit-line-clamp: 2;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n    }\n\n    .post .post-image {\n        width: 100%;\n        max-width: 250px;\n        min-width: 150px;\n        aspect-ratio: 16 / 9;\n        object-fit: cover;\n        margin: 0.5rem 0rem 0rem auto;\n    }\n</style>\n"],"names":["_","$catch_content__err_message","$scope","a","d","$catch_content__$params","$catch_content__err","b","c","message"],"mappings":"+EAsDEA,EAAA,EA7BgC,MAAAC,EAAAD,EAAA,EAAAE,GAAAF,EAAAE,EAAAC,EAZeD,EAAAE,CAAW,CAAA,EAAAC,EAAAL,EAAA,EAAAE,GAAAI,EAAAJ,EAAAA,EAAAK,EAAA,CAAA,CAAA,CAAA,EAAAD,EAAAN,IAAAE,GAAAD,EAAAC,EAAAA,EAAAM,GAAAC,OAAA,CAAA,EAAAT,4EAAAK,CAAA,EAAAL,EAAA,KAAA,uCAAA,GAAA"}