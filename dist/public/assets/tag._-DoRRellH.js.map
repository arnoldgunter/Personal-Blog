{"version":3,"file":"tag._-DoRRellH.js","sources":["../../../src/routes/tag/$slug/+page.marko"],"sourcesContent":["import { pb } from \"../../../lib/pb\";\n\n<try>\n    <@placeholder>\n        <div class=\"posts\">\n            <h2>Loadingâ€¦</h2>\n            <div/>\n        </div>\n    </@placeholder>\n\n    <@catch|err|>\n        <div class=\"posts\">\n            <h5>Error: ${err.message}</h5>\n            <p>\n                <a href=\"/\">Go back to home</a> or check out one of the other tags and posts below!\n            </p>\n            <aside/>\n        </div>\n    </@catch>\n\n    <div class=\"posts\">\n        <h2>Posts for tag: ${$global.url.pathname.split(\"/\").pop()}</h2>\n        <await|data|=fetchPostsByTag($global.url.pathname.split(\"/\").pop())>\n            <for|post| of=data.posts>\n                <a href=`/post/${post.slug}` class=\"post\">\n                    <span class=\"post-content\">\n                        <small>\n                            ${new Intl.DateTimeFormat(\"en-US\", {\n                                year: \"numeric\",\n                                month: \"long\",\n                                day: \"numeric\",\n                            }).format(new Date(post.created))}\n                        </small>\n                        <h5>${post.title}</h5>\n                        <p>${post.subtitle}</p>\n                    </span>\n                    <img\n                        src=`http://127.0.0.1:8090/api/files/${post.collectionId}/${post.id}/${post.cover}?thumb=300x150`\n                        alt=`${post.title}`\n                        class=\"post-image\">\n                </a>\n            </for>\n        </await>\n    </div>\n</try>\nstatic const fetchPostsByTag = async (tagSlug) => {\n    const tagRecords = await pb.collection(\"tags\").getFullList(1, {\n        filter: `slug=\"${tagSlug}\"`,\n    });\n\n    if (tagRecords.length === 0) {\n        throw new Error(\"Tag not found\");\n    }\n\n    const tagId = tagRecords[0].id;\n\n    const postsRes = await pb.collection(\"posts\").getFullList({\n        filter: `tags~\"${tagId}\"`,\n        sort: \"-created\",\n        fields: \"id,collectionId,collectionName,title,slug,created,cover,subtitle\",\n    });\n\n    return {\n        posts: postsRes,\n    };\n};\n\n<style>\n    .posts {\n        width: clamp(200px, 100%, 996px);\n        min-height: 70vh;\n        margin: 2rem auto;\n        padding: 2rem 1rem;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 1rem;\n        overflow: hidden;\n    }\n\n    .posts h2 {\n        margin-bottom: 2rem;\n    }\n\n    .post {\n        position: relative;\n        width: 100%;\n        height: fit-content;\n        display: grid;\n        grid-template-columns: 2fr 1fr;\n        padding-bottom: 1rem;\n        border-bottom: 1px solid var(--line-color);\n        text-decoration: none;\n        transition: all 0.2s ease-in-out;\n    }\n\n    .post::before {\n        content: \"\";\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 0%;\n        height: 1px;\n        background-color: #333;\n        z-index: 1000;\n        transition: all 0.3s ease-in-out;\n    }\n\n    .post:hover::before {\n        width: 100%;\n        transition: all 0.3s ease-in-out;\n    }\n\n    .post .post-content {\n        width: 100%;\n        max-height: 500px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .post h5 {\n        padding: 0px;\n        text-overflow: ellipsis;\n        line-clamp: 3;\n        -webkit-line-clamp: 3;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n    }\n\n    .post p {\n        margin-top: 0.5rem;\n        color: var(--text-secondary-color);\n        text-overflow: ellipsis;\n        line-clamp: 2;\n        -webkit-line-clamp: 2;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n    }\n\n    .post .post-image {\n        width: 100%;\n        max-width: 250px;\n        min-width: 150px;\n        aspect-ratio: 16 / 9;\n        object-fit: cover;\n        margin: 0.5rem 0rem 0rem auto;\n    }\n</style>\n"],"names":["_","$catch_content__err_message","$scope","a","e","$catch_content__setup","_aside","b","$catch_content__$params","$catch_content__err","c","d","message","_aside_template","_aside_walks"],"mappings":"gIAiEEA,EAAA,EA1CkC,MAAAC,EAAAD,EAAA,EAAAE,GAAAF,EAAAE,EAAAC,EAXXD,EAAAE,CAAW,CAAA,EAAAC,EAAAH,GAAA,CAAAI,EAAAJ,EAAAK,CAAA,CAAA,EAAAC,EAAAR,EAAA,EAAAE,GAAAO,EAAAP,EAAAA,EAAAQ,EAAA,CAAA,CAAA,CAAA,EAAAD,EAAAT,IAAAE,GAAAD,EAAAC,EAAAA,EAAAS,GAAAC,OAAA,CAAA,EAAAZ,EAAA,KAAA,iIAAAa,CAAA,SAAA,SAAAC,CAAA,KAAAT,EAAAG,CAAA,EAAAR,EAAA,KAAA,sDAAA,GAAA"}